(()=>{"use strict";var e,n={44:(e,n,s)=>{s(730),s(146)},146:(e,n,s)=>{function o(e){const n=e.dimensions.x,s=e.dimensions.y,o=e.dimensions.z;return 2*(n*s+n*o+s*o)}function t(e){return e.dimensions.x*e.dimensions.y*e.dimensions.z}var r=s(387);async function a(e,n){(0,r.QK)("LOADING");try{const s=`file.${(0,r.ti)(e)}`;try{n.FS.unlink(`/${s}`)}catch(e){}const a=await(0,r.xc)(e);console.log(a),n.FS.createDataFile("/",s,a,!0,!0),console.log(`파일 '${s}'을 가상 파일 시스템에 생성했습니다.`);const i=new n.STEPControl_Reader_1;if(console.log("STEPControl_Reader 인스턴스 생성됨"),i.ReadFile(s)!==n.IFSelect_ReturnStatus.IFSelect_RetDone)throw new Error("STEP 파일 읽기 실패");{console.log("STEP 파일 읽기 성공");let e="지정되지 않음",s="지정되지 않음";try{const o=new n.TColStd_SequenceOfAsciiString_1,t=new n.TColStd_SequenceOfAsciiString_1,r=new n.TColStd_SequenceOfAsciiString_1;i.FileUnits(o,t,r),o.Length()>0?(e=o.Value(1).ToCString(),console.log(`파일에 정의된 길이 단위: ${e}`)):console.warn("파일에서 길이 단위를 찾을 수 없습니다."),t.Length()>0?(s=t.Value(1).ToCString(),console.log(`파일에 정의된 각도 단위: ${s}`)):console.warn("파일에서 각도 단위를 찾을 수 없습니다.")}catch(n){console.error("단위 정보 추출 중 오류 발생:",n),console.error("오류 상세 정보:",n.message),e="오류 발생",s="오류 발생"}console.log(`파일의 길이 단위: ${e}`),console.log(`파일의 각도 단위: ${s}`);const a=new n.Message_ProgressRange_1,c=i.TransferRoots(a);console.log(`변환된 루트 수: ${c}`);const l=i.OneShape();if(!l)throw new Error("형상을 가져올 수 없습니다.");{console.log("형상 가져오기 성공");const a=function(e,n){const s=new n.Bnd_Box_1;n.BRepBndLib.Add(e,s,!0);const o=s.CornerMin(),t=s.CornerMax(),r=o.X(),a=o.Y(),i=o.Z(),c=t.X(),l=t.Y(),d=t.Z();return{min:{x:r,y:a,z:i},max:{x:c,y:l,z:d},dimensions:{x:c-r,y:l-a,z:d-i}}}(l,n),i={aabb:a,area:o(a),volume:t(a),units:{length:e,angle:s}};(0,r.QK)("RESULTS",i)}}n.FS.unlink(`/${s}`)}catch(e){console.error("STEP 처리 중 오류 발생:",e),(0,r.QK)("PROCESSING_ERROR",{message:e.message})}}(0,r.PA)().then((e=>{document.getElementById("step-file").addEventListener("change",(async n=>{await a(n.target.files[0],e)}));const n=document.getElementsByClassName("test");for(const s of n)s.addEventListener("click",(async n=>{const s=n.target.name,o=await fetch(s).then((e=>e.blob())),t=new File([o],s,{type:"application/octet-stream"});await a(t,e)}))}))},387:(e,n,s)=>{s.d(n,{PA:()=>t,QK:()=>i,ti:()=>a,xc:()=>r});var o=s(57);const t=async()=>{try{if(void 0===o.A)throw new Error("OpenCascade.js 라이브러리를 찾을 수 없습니다.");const e=await(0,o.A)();return console.log("OpenCascade.js 초기화 완료"),i("LOAD_SUCCESS"),e}catch(e){throw console.error("OpenCascade.js 초기화 오류:",e),i("LIB_ERROR",{message:e.message}),e}},r=e=>new Promise(((n,s)=>{let o=new FileReader;o.onload=()=>n(o.result),o.onerror=s,o.readAsText(e)})),a=e=>{switch(e.name.toLowerCase().split(".").pop()){case"step":case"stp":return"step";case"iges":case"igs":return"iges";default:return}};function i(e,n={}){const s=document.getElementById("result");switch(e){case"LOADING":s.innerHTML='<div class="loading">STEP 파일 분석 중...</div>';break;case"LOAD_SUCCESS":s.innerHTML='<p class="success">OpenCascade.js 로드 완료. STEP 파일을 선택해주세요.</p>';break;case"LIB_ERROR":s.innerHTML=`\n          <div class="error">\n            <h3>라이브러리 로드 오류</h3>\n            <p>${n.message}</p>\n            <p>브라우저 콘솔에서 추가 정보를 확인하세요.</p>\n          </div>\n        `;break;case"INIT_ERROR":s.innerHTML='\n          <div class="error">\n            <h3>라이브러리 오류</h3>\n            <p>OpenCascade.js를 초기화할 수 없습니다. 페이지를 새로고침 후 다시 시도해주세요.</p>\n          </div>\n        ';break;case"PROCESSING_ERROR":s.innerHTML=`\n          <div class="error">\n            <h3>오류 발생</h3>\n            <p>${n.message}</p>\n            <p>브라우저 콘솔에서 추가 정보를 확인하세요.</p>\n          </div>\n        `;break;case"RESULTS":let e="?",o="";n.units&&n.units.length&&"지정되지 않음"!==n.units.length&&"오류 발생"!==n.units.length&&(o=n.units.length.toUpperCase(),e=o.includes("MILLIMETRE")?"mm":o.includes("INCH")?"in":o.includes("METRE")?"m":o.includes("CENTIMETRE")?"cm":n.units.length),s.innerHTML=`\n            <div class="success">STEP 파일을 성공적으로 처리했습니다!</div>\n            <h3>AABB 계산 결과</h3>\n            <p>측정된 길이 단위: ${n.units&&n.units.length?n.units.length:"알 수 없음"}</p>\n            <p>치수 (너비×높이×깊이): ${n.aabb.dimensions.x.toFixed(2)} × ${n.aabb.dimensions.y.toFixed(2)} × ${n.aabb.dimensions.z.toFixed(2)} (${e})</p>\n            <p>표면적: ${n.area.toFixed(2)} ${e}²</p>\n            <p>부피: ${n.volume.toFixed(2)} ${e}³</p>\n            <h4>좌표</h4>\n            <p>최소 (X, Y, Z): (${n.aabb.min.x.toFixed(2)}, ${n.aabb.min.y.toFixed(2)}, ${n.aabb.min.z.toFixed(2)})</p>\n            <p>최대 (X, Y, Z): (${n.aabb.max.x.toFixed(2)}, ${n.aabb.max.y.toFixed(2)}, ${n.aabb.max.z.toFixed(2)})</p>\n          `}}}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,e=[],o.O=(n,s,t,r)=>{if(!s){var a=1/0;for(d=0;d<e.length;d++){for(var[s,t,r]=e[d],i=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](s[c])))?s.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var l=t();void 0!==l&&(n=l)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,t,r]},o.d=(e,n)=>{for(var s in n)o.o(n,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.p="./",(()=>{var e={631:0,673:0,792:0};o.O.j=n=>0===e[n];var n=(n,s)=>{var t,r,[a,i,c]=s,l=0;if(a.some((n=>0!==e[n]))){for(t in i)o.o(i,t)&&(o.m[t]=i[t]);if(c)var d=c(o)}for(n&&n(s);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},s=self.webpackChunkcad_ocjs=self.webpackChunkcad_ocjs||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))})();var t=o.O(void 0,[462,525,514,730],(()=>o(44)));t=o.O(t)})();
//# sourceMappingURL=main.cd9e772ded2af7796d94.bundle.js.map